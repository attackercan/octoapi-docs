[[{"l":"Документация ScanFactory","p":["Платформа ScanFactory проводит автоматизированное сканирование внешней сетевой инфраструктуры и вебсайтов Заказчика на предмет выявления уязвимостей методом «чёрного» и «серого» ящика с помощью 16 сканеров безопасности.","Чтобы протестировать решение в вашей компании, запишитесь на пилот: support@scanfactory.io"]}],[{"i":"1---быстрый-старт","l":"1 - Быстрый старт","p":["С помощью данной статьи вы сможете оценить функционал и возможности решения"]},{"l":"1. Создайте новый проект","p":["Перейдя во вкладку Проекты нажмите на кнопку Создать проект. Заполните появившуюся форму. Укажите имя проекта, цели сканирования: хотя бы один домен, вайлдкард, IP или подсеть (Рис. 1.2).","Рис. 1.2","Нажмите на кнопку Создать, если хотите провести более тонкую настройку проекта перед запуском сканирований, либо Cоздать и сканировать, если хотите оставить остальные параметры по умолчанию и начать скан немедленно.","Если у Вас есть WAF/IDS, то необходимо добавить в whitelist наши IP-адреса 158.160.8.240/28, с которых будет проводиться сканирование.","После создания проекта, выберите свой проект из списка и нажмите на него. Перед вами появится его страница. (Рис. 1.3.)","Рис. 1.3","Нажмите кнопку старта в правом врехнем углу страницы проекта. Поставить запущеный проект на паузу можно этой же кнопкой."]},{"l":"2. Настройте проект","p":["Перед вами - панель управления целями сканирования (скоупом). Эти поля похожи на те, что были на этапе создания проекта, но имеют несколько дополнительных полей.","Домены: домены (например, yandex.ru) и вайлдкарды (например, *.yandex.ru). Вайлдкард *.yandex.ru означает, что сканированию подлежит домен yandex.ru и все его поддомены.","IP и подсети: адреса IPv4 и подсети (например, 11.22.33.44/24).","Переключатель \"Ручное подтверждение новых активов\" означает, ни один домен не будет просканирован пока его IP-адреса не будут занесены вами в IP и подсети. Используйте её, чтобы сканирование не шло по ресурсам, которые расположены на IP-адресах сторонних организаций. Если Ручное подтверждение новых активов выключено (по умолчанию), IP адреса доменов проекта будут заноситься в скоуп автоматически.","Если ручное подтверждение новых активов включено, добавляйте IP адреса интересующих вас доменов вручную, иначе они не будут просканированы."]},{"l":"3. Дашборд","p":["В данном разделе отображается сводная статистика работы Системы.","Рис. 3.1"]},{"l":"4. Активы","p":["Активы - страница, которая отображает текущее состояние инфраструктуры Заказчика.","После окончания сканирования на странице Активов будут отображены найденные IP, порты и домены. Рис. 4.1"]},{"l":"5. Уязвимости","p":["Выгрузить события в формате JSON.","Выполнять поиск и фильтрацию уязвимостей по заданным параметрам;","Дата обнаружения","Компонент, который обнаружил уязвимость","Нажав на название уязвимости возможно перейти на карточку уязвимости, и получить подробную информацию о ней. В карточке уязвимости указаны:","Название","Описание","Просматривать все обнаруженные уязвимости;","Просмотреть подробную информацию об уязвимости в карточке уязвимости;","Рис. 5.1","Рис. 5.2","Статус","Управлять статусом уязвимостей;","Уровень важности","Функциональность раздела “Уязвимости” позволяет:","Шаги по воспроизведению"]},{"l":"6. Подключение телеграм-бота","p":["Начните диалог с телеграм-ботом: @scanfactory_reporter_bot","Подключите бота к вашему Личному Кабинету с помощью команды:/connect https://yx-client.scanfactory.io/api/ token TOKEN","Рабочий токен вы можете получить, связавшись с технической поддержкой."]}],[{"i":"2---технический-обзор-scanfactory","l":"2 - Технический обзор ScanFactory"},{"l":"Вступление","p":["На этой странице подробно описаны используемые инструменты и возможные параметры запуска."]},{"l":"Этапы сканирования","p":["Платформа проводит сканирование внешнего периметра в 3 логических этапа:","№","Описание этапа","Результат работы","1","Сбор активов (OSINT)","Перечень доменов и IP, принадлежащих Заказчику","2","Сканирование сетевых сервисов","Определение открытых портов и сервисов; поиск известных CVE; брутфорс аутентификации на сетевых сервисах (FTP, SSH, Telnet, и др)","3","Сканирование веб-приложений","Краулинг веб-сайтов; поиск скрытых файлов и папок; поиск уязвимостей","Для примера рассмотрим сканирование Компании со следующими входными данными: Домены, принадлежащие компании: *.company.ru IP, принадлежащие компании: 11.22.33.44/23"]},{"i":"этап-1-сбор-активов-osint","l":"Этап 1. Сбор активов (OSINT)","p":["Доступен следующий набор инструментов:","amass и subfinder- Пассивный поиск поддоменов по открытым источникам altdns- Рекурсивный брутфорс поддоменов по словарю (словарь по умолчанию - 1000 слов) sdto- Проверка перехватов поддомена. Opensource инструмент собственной разработки","Пример работы:","amass нашёл домен 2 домена: www.company.ru(3 уровня) и домен sub.dev.company.ru(4 уровня). Оба домена добавлены в БД, и отображаются на вкладке Активы","altdns запустит брутфорс поддоменов на 3 уровень *.company.ru(т.к. в настройках был указан wildcard 3 уровня), а также *.dev.company.ru(т.к. домен 4 уровня был найден с помощью amass). Для этого создаётся 2 списка потенциальных доменов, и осуществляется резолв доменов с помощью инструмента massdns, публичных резолверов Yandex и Google, со скоростью 1000 запросов в секунду.","На каждый найденный поддомен запускается проверка перехвата поддоменов с помощью инструмента sdto"]},{"l":"Этап 2. Сканирование сетевых сервисов","p":["Выбранные шаблоны инструментов будут запущены на все IP из диапазона 11.22.33.44/23, а также на все IP, в которые резолвятся обнаруженные домены из Этапа 1.","Доступен следующий набор инструментов:","nmap- поиск открытых портов, а также определение версий сервисов infrascan- поиск известных CVE. База данных CVE является самой большой в мире, содержит более 65000 проверок, и обновляется каждый день patator- брутфорс паролей к сетевым сервисам по дефолтным словарям","При старте проекта создаётся 2 шаблона nmap: на топ-1000 портов; и на все 65535 портов. Также вы можете создать свой шаблон с нужными опциями nmap На каждый открытый порт определяется версия запущенного сервиса, и запускается поиск известных уязвимостей к этой версии сервиса с помощью сервиса Vulners","Так как и все наши заказчики, и мы находимся в России - а значит, ответы о том, закрыт порт или нет, мы будем получать быстро, то мы используем разумные настройки, которые выполняют скан даже быстрее, чем nmap timing option -Т4, и при этом выдают достоверный результат","Мы используем следующие настройки для nmap:","--max-rtt-timeout 600ms- максимальное время получения ответа от порта--min-rtt-timeout 10ms- минимальное время получения ответа от порта--initial-rtt-timeout 300ms- первоначальное время получения ответа (нмап сам меняет это значение, в рамках min/max опций выше)--host-timeout 110m- максимальное время сканирования IP = 1 час 50 минут--max-retries 3- количество повторных попыток на сканирование порта--max-scan-delay 100ms- максимальная задержка между отправкой повторных пакетов","С этими настройками 1000 портов на 1 сервере сканируются за 25 секунд. Таким образом, подсеть размера /23 (512 IP) на топ 1000 портов мы можем просканировать за 4,5 часа (имея 1 запущенную копию nmap)","Пример работы: nmap обнаруживает открытый порт 22, и опредляет версию запущенного сервиса как OpenSSH 7.9. Сервер помечается как \"активный\", и информацию по этому сервису теперь можно увидеть на вкладке Активы Сервис Vulners сообщает, что версия OpenSSH устарела и имеет перечень уязвимостей, поэтому создаёт новую запись об этой Уязвимости infrascan запускает анализ каждого IP patator запускает брутфорс авторизаций на каждый открытый порт","При сканировании больших подсетей (более, чем /23) рекомендуем включать дополнительную настройку «Предварительный ping IP». В этом случае на каждый сервер отправляется команда nmap -sn IP, и на основе результата сервер будет отмечен как «Активный» или «Не активный». Далее, шаблоны инструментов будут запущены только на IP, определённые как «Активные»."]},{"l":"Этап 3. Сканирование веб-приложений","p":["Сканирование веб-приложений проходит в 3 этапа: сбор информации о веб-приложении, отсев «неинтересных» запросов, и поиск уязвимостей"]},{"l":"Этап 3а. Сбор информации о веб-приложении","p":["Выбранные шаблоны инструментов будут запущены на все открытые порты:","crawler- обход веб-приложения с помощью headless Chrome краулера собственной разработки, а также сохранение скриншотов главной страницы crawlergo- обход страниц веб-приложений dirsearch- поиск скрытых файлов и папок на веб-сервере Результат работы – набор GET/POST запросов, которые передаются на следующий этап"]},{"i":"этап-3б-отсев-неинтересных-запросов","l":"Этап 3б. Отсев «неинтересных» запросов","p":["Все обнаруженные запросы проходят через двухуровневую систему отсева «неинтересных» запросов:","Пример. Во время краулинга интернет-магазина были найдены следующие ссылки: http://client.ru/products/book-1/ http://client.ru/products/book-2/ http://client.ru/products/book-3/... http://client.ru/products/book-31337/ Все имеющиеся ссылки имеют одинаковый паттерн: http://client.ru/products/book-[\\d]/","Как только в базу данных будет добавлено 50 (значение по умолчанию) ссылок с одинаковым паттерном, далее ссылки с таким же паттерном сохраняться не будут. В нашем примере будут сохранены только запросы к книгам с 1 по 50.","ScanFactory использует собственную технологию, основанную на SimHash, которая анализирует контент каждой веб-страницы перед сохранением в базу данных. В случае, если большое количество страниц имеет одинаковую HTML-структуру (например, страницы блога, или карточки товаров), такие страницы не сохраняются"]},{"l":"Этап 3в. Поиск уязвимостей","p":["На финальном этапе запускаются следующие шаблоны инструментов:","webscan- сканер OWASP Top 10 уязвимостей. Инструмент работает в режиме proxy nuclei- opensource сканер веб-приложений с набором публичных и приватных шаблонов. ffuf- поиск скрытых GET/POST параметров путём поиска аномалий в ответах сервера. На каждый имеющийся HTTP-запрос в базе данных инструмент отправляет более 1000 запросов (вида http://client.ru/api/?DEBUG=1, http://client.ru/api/ADMIN?=1, и другие). Мы рекомендуем включать этот инструмент, только если у вас в скоупе 1-5 веб-приложений, и НЕ включать его, если веб-приложений больше"]},{"i":"сканирование-веб-приложений-методом-серого-ящика","l":"Сканирование веб-приложений методом «серого ящика»","p":["Авторизация в веб-приложениях работает путём добавления авторизационных HTTP-заголовок к краулерам Для этого создайте новый шаблоны crawler и crawlergo с параметрами: extra_headers: {Cookie: a=b}(подставить сюда хэдеры, по которому приложение авторизует пользователя)","Так как указанные хэдеры будут добавляться ко всем запросам краулера, то нужно создавать отдельный проект под каждое веб-приложение, для которого настраивается авторизация"]}],[{"i":"3---список-используемых-сканеров","l":"3 - Список используемых сканеров","p":["altnds","amass","burp","crawler","dirsearch","ffuf","grep","infrascan","nmap","nuclei","patator","phuip-fpizdam","sdto","subfinder","waybackurls","wpscan","В этом разделе перечислены сканеры, используемые в ScanFactory, а также какие данные инструменты получают на вход, и что производят на выходе.","вход: HTTP-запрос","вход: IP","вход: IP-адрес","вход: вайлдкард (*.domain.ru)","вход: домен","вход: домен/IP","вход: порт","выход: HTTP-запросы","выход: HTTP-запросы, домены","выход: открытые порты","выход: список найденных доменных имён","выход: транзакции","выход: уязвимости","выход: уязвимость","предназначение: автоматизированный перебор паролей к сетевым сервисам","предназначение: автоматизированный поиск уязвимостей","предназначение: активный брутфорс поддоменов","предназначение: пассивный поиск поддоменов","предназначение: поиск CVE","предназначение: поиск OWASP Top 10 уязвимостей","предназначение: поиск доменов и HTTP-ссылок на веб-страницах","предназначение: поиск открытых портов и определение запущенных сервисов","предназначение: поиск скрытых параметров на веб-сайтах","предназначение: поиск скрытых файлов и папок","предназначение: поиск ссылок на этот домен в Wayback Machine","предназначение: поиск уязвимостей Wordpress","предназначение: проверка на уязвимость CVE-2019-11043","предназначение: проверка перехвата поддомена","предназначение: рекурсивный обход сайтов, сбор HTTP-запросов и доменов"]}]]